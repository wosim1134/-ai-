<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="opgg프로젝트.css">
</head>
<body>
    <div class="container">
        <section class="search_menu">
            <div class="search_bar">
                <input type="text" class="name" placeholder="이름" value="아기토끼">
                <input type="text" class="tag" placeholder="태그" value="냐영토끼">
                <button class="search_button">검색</button>
            </div>
        </section>
    
        <section class="player_menu">
            <div class="player">
                <img src="https://opgg-static.akamaized.net/meta/images/profile_icons/profileIcon5314.jpg" alt="프사">
                <div class="player_info">
                    <h1>닉네임</h1>
                    <h2>level <span>100</span></h2>
                </div>
            </div>
            <div class="solo">
                <h1>솔로랭크</h1>
                <img src="https://opgg-static.akamaized.net/images/medals_new/challenger.png" alt="솔랭티어">
                <span class="win">ㅇ</span>승 <span class="lose">ㅇ</span>패 / <span class="rate">ㅇ</span>%
            </div>
            <div class="flex">
                <h1>자유랭크</h1>
                <img src="https://opgg-static.akamaized.net/images/medals_new/challenger.png" alt="자랭티어">
                <span class="win">ㅇ</span>승 <span class="lose">ㅇ</span>패 / <span class="rate">ㅇ</span>%
            </div>
        </section>
    
        <section class="summary_menu">

            <div class="record">
                전적
                <h2><span class="win">0</span>승 <span class="lose">0</span>패 <span class="draw">0</span>무 / <span class="rate">0</span>%</h2>
                <h2>KDA <span class="kda">10.0</span></h2>
                <p> <span class="kill">0</span> / <span class="death">0</span> / <span class="assist">0</span></p>
            </div>
            <div class="lately_champion">
                <p>최근 챔피언</p>
            </div>
            <div class="lately_position">
                <p>최근 포지션</p>
                <div>
                    <div class="top">
                        <img src="https://s-lol-web.op.gg/images/icon/icon-position-top.svg" alt="탑">
                        <br>
                        <span>10</span>
                    </div>
                    <div class="jungle">
                        <img src="https://s-lol-web.op.gg/images/icon/icon-position-jng.svg" alt="정글">
                        <br>
                        <span>10</span>
                    </div>
                    <div class="mid">
                        <img src="https://s-lol-web.op.gg/images/icon/icon-position-mid.svg" alt="미드">
                        <br>
                        <span>10</span>
                    </div>
                    <div class="bot">
                        <img src="https://s-lol-web.op.gg/images/icon/icon-position-bot.svg" alt="원딜">
                        <br>
                        <span>10</span>
                    </div>
                    <div class="supporter">
                        <img src="https://s-lol-web.op.gg/images/icon/icon-position-sup.svg" alt="서폿">
                        <br>
                        <span>10</span>
                    </div>
                    <div class="etc">
                        <img src="https://s-lol-web.op.gg/images/icon/icon-position-all.svg" alt="등등">
                        <br>
                        <span>10</span>
                    </div>
                </div>
                
            </div>
        </section>
    
        <section class="game20_menu">
            <div class="game">
                <div class="mod">게임모드</div>
                <div class="champion">챔피언</div>
                <div class="multikill">멀티킬</div>
                <div class="rune">룬</div>
                <div class="score">KDA CS</div>
                <div class="item">아이템</div>
                <div class="users">유저들</div>
            </div>

            <div class="game defeat">
                <div class="mod">자유랭크</div>
                <div class="champion">
                    <img src="https://opgg-static.akamaized.net/meta/images/lol/14.14.1/champion/Teemo.png" alt="챔피언프사">
                    <p>레벨 <span>5</span></p>
                </div>
                <div class="multikill">펜타킬</div>
                <div class="rune">
                    <img src="https://opgg-static.akamaized.net/meta/images/lol/14.14.1/perk/8439.png" class="rune1" alt="룬1">
                    <img src="https://opgg-static.akamaized.net/meta/images/lol/14.14.1/perkStyle/8300.png" class="rune2" alt="룬2">
                </div>
                <div class="score">
                    <p><span class="kda">4.0</span> <span class="kill">7</span> / <span class="death">1</span> / <span class="assist">2</span></p>
                    <p>GOLD <span class="gold">20000</span></p>
                    <p>CS <span class="cs">127</span></p>
                </div>
                <div class="item">
                    <img src="https://opgg-static.akamaized.net/meta/images/lol/14.14.1/item/3031.png" class="item1" alt="아이템1">
                    <img src="https://opgg-static.akamaized.net/meta/images/lol/14.14.1/item/3031.png" class="item2" alt="아이템2">
                    <img src="https://opgg-static.akamaized.net/meta/images/lol/14.14.1/item/3031.png" class="item3" alt="아이템3">
                    <img src="https://opgg-static.akamaized.net/meta/images/lol/14.14.1/item/3031.png" class="item4" alt="아이템4">
                    <img src="https://opgg-static.akamaized.net/meta/images/lol/14.14.1/item/3031.png" class="item5" alt="아이템5">
                    <img src="https://opgg-static.akamaized.net/meta/images/lol/14.14.1/item/3031.png" class="item6" alt="아이템6">
                    <img src="https://opgg-static.akamaized.net/meta/images/lol/14.14.1/item/3031.png" class="item7" alt="아이템7">
                </div>
                <div class="users">
                    <div class="team1">
                        <p class="user1">유저1</p>
                        <p class="user2">유저2</p>
                        <p class="user3">유저3</p>
                        <p class="user4">유저4</p>
                        <p class="user5">유저5</p>
                    </div>
                    <div class="team2">
                        <p class="user1">유저1</p>
                        <p class="user2">유저2</p>
                        <p class="user3">유저3</p>
                        <p class="user4">유저4</p>
                        <p class="user5">유저5</p>
                    </div>
                </div>
            </div>

            <div class="game victory">
                <div class="mod">자유랭크</div>
                <div class="champion">
                    <img src="https://opgg-static.akamaized.net/meta/images/lol/14.14.1/champion/Teemo.png" alt="챔피언프사">
                    <p>레벨 <span>5</span></p>
                </div>
                <div class="multikill">펜타킬</div>
                <div class="rune">
                    <img src="https://opgg-static.akamaized.net/meta/images/lol/14.14.1/perk/8439.png" class="rune1" alt="룬1">
                    <img src="https://opgg-static.akamaized.net/meta/images/lol/14.14.1/perkStyle/8300.png" class="rune2" alt="룬2">
                </div>
                <div class="score">
                    <p><span class="kda">4.0</span> <span class="kill">7</span> / <span class="death">1</span> / <span class="assist">2</span></p>
                    <p>GOLD <span class="gold">20000</span></p>
                    <p>CS <span class="cs">127</span></p>
                </div>
                <div class="item">
                    <img src="https://opgg-static.akamaized.net/meta/images/lol/14.14.1/item/3031.png" class="item1" alt="아이템1">
                    <img src="https://opgg-static.akamaized.net/meta/images/lol/14.14.1/item/3031.png" class="item2" alt="아이템2">
                    <img src="https://opgg-static.akamaized.net/meta/images/lol/14.14.1/item/3031.png" class="item3" alt="아이템3">
                    <img src="https://opgg-static.akamaized.net/meta/images/lol/14.14.1/item/3031.png" class="item4" alt="아이템4">
                    <img src="https://opgg-static.akamaized.net/meta/images/lol/14.14.1/item/3031.png" class="item5" alt="아이템5">
                    <img src="https://opgg-static.akamaized.net/meta/images/lol/14.14.1/item/3031.png" class="item6" alt="아이템6">
                    <img src="https://opgg-static.akamaized.net/meta/images/lol/14.14.1/item/3031.png" class="item7" alt="아이템7">
                </div>
                <div class="users">
                    <div class="team1">
                        <p class="user1">유저1</p>
                        <p class="user2">유저2</p>
                        <p class="user3">유저3</p>
                        <p class="user4">유저4</p>
                        <p class="user5">유저5</p>
                    </div>
                    <div class="team2">
                        <p class="user1">유저1</p>
                        <p class="user2">유저2</p>
                        <p class="user3">유저3</p>
                        <p class="user4">유저4</p>
                        <p class="user5">유저5</p>
                    </div>
                </div>
            </div>

        </section>
    </div>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>

    const API_KEY = 'RGAPI-7ad16158-9b8a-4090-b19e-7397f43452fb'
    let 닉네임 = document.querySelector('.name')
    let 태그 = document.querySelector('.tag')

    let puuid
    let 레벨
    let 프사번호
    let id

    // 검색 버튼에 클릭 이벤트 걸기
    const 검색버튼 = document.querySelector(".search_button")
    검색버튼.addEventListener("click", async function () { //
        // 1. ACCOUNT API 들어가기
        await axios.get(`https://asia.api.riotgames.com/riot/account/v1/accounts/by-riot-id/${닉네임.value}/${태그.value}?api_key=${API_KEY}`)
        .then(function (response) {
            console.log(response);
            puuid = response.data.puuid

            document.querySelector(".player_info h1").textContent = response.data.gameName + "#" + response.data.tagLine

        })

        // 2. summoner API 들어감 : 유저의 레벨, 프로필이미지, 아이디
        await axios.get(`https://kr.api.riotgames.com/lol/summoner/v4/summoners/by-puuid/${puuid}?api_key=${API_KEY}`)
        .then(function (response) {
            console.log(response);
            레벨 = response.data.summonerLevel
            프사번호 = response.data.profileIconId
            id = response.data.id

            document.querySelector('.player_info h2 span').textContent = 레벨  // 레벨 변경
            document.querySelector('.player img').setAttribute('src', `https://opgg-static.akamaized.net/meta/images/profile_icons/profileIcon${프사번호}.jpg?image=e_upscale,q_auto,f_webp,w_auto&v=1721451321478`)  // 레벨 변경

        })



        // 3-1. LEGEND API 들어감 : 티어, 승패
        await axios.get(`https://kr.api.riotgames.com/lol/league/v4/entries/by-summoner/${id}?api_key=${API_KEY}`)
        .then(function (response) {
            console.log(response);

            // 솔랭
            if (response.data[0] != undefined) {
            const 솔랭이미지 = document.querySelector('.player_menu .solo img')
            솔랭이미지.setAttribute("src", `https://opgg-static.akamaized.net/images/medals_new/${(response.data[0].tier).toLowerCase()}.png`)

            document.querySelector(".solo .win").textContent = response.data[0].wins //
            document.querySelector(".solo .lose").textContent = response.data[0].losses //
            document.querySelector(".solo .rate").textContent = (response.data[0].wins / (response.data[0].wins + response.data[0].losses) * 100).toFixed(2)
            }

            // 자랭
            if (response.data[1] != undefined && response.data[1].queueType == "RANKED_FLEX_SR") {
            const 자랭이미지 = document.querySelector('.player_menu .flex img')
            자랭이미지.setAttribute("src", `https://opgg-static.akamaized.net/images/medals_new/${(response.data[1].tier).toLowerCase()}.png`)

            document.querySelector(".flex .win").textContent = response.data[1].wins //
            document.querySelector(".flex .lose").textContent = response.data[1].losses //
            document.querySelector(".flex .rate").textContent = (response.data[1].wins / (response.data[1].wins + response.data[1].losses) * 100).toFixed(2)
            }

        else if (response.data[2] != undefined && response.data[2].queueType == "RANKED_FLEX_SR") {
            const 자랭이미지 = document.querySelector('.player_menu .flex img')
            자랭이미지.setAttribute("src", `https://opgg-static.akamaized.net/images/medals_new/${(response.data[2].tier).toLowerCase()}.png`)

            document.querySelector(".flex .win").textContent = response.data[2].wins //
            document.querySelector(".flex .lose").textContent = response.data[2].losses //
            document.querySelector(".flex .rate").textContent = (response.data[2].wins / (response.data[2].wins + response.data[2].losses) * 100).toFixed(2)
            }

        })

        // 3-2. WATCH API 들어감 : puuid로 20개 게임 불러오기
        await axios.get(`https://asia.api.riotgames.com/lol/match/v5/matches/by-puuid/${puuid}/ids?start=0&count=20&api_key=${API_KEY}`)
        .then(function (response) {
            console.log(response);
        })





        

    })


</script>
</body>
</html>